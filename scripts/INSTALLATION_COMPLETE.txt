â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  âœ… INSTALLATION COMPLETE                                â•‘
â•‘           qBittorrent Performance Optimization Applied                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š WHAT WAS DONE:

1. âœ… Docker Compose Updated
   â€¢ Memory: 1GB â†’ 2GB
   â€¢ CPU: 1.5 â†’ 2.0 cores
   â€¢ ulimits: 65536 file descriptors
   â€¢ Container recreated successfully

2. âœ… Optimized Configuration Installed
   â€¢ Backup created: /mnt/docker-usb/qbittorrent/qBittorrent/qBittorrent.conf.backup-20260121-223726
   â€¢ New config: 2000 connections, 256MB cache, TCP priority
   â€¢ Preallocation enabled, 8 active downloads

3. âœ… Time-Based Scheduler Configured
   â€¢ Cron job: Runs every minute
   â€¢ Active hours (01:00-08:00): Unlimited download, 5 MB/s upload
   â€¢ Idle hours (08:00-01:00): 50 KB/s throttle
   â€¢ Logs: /tmp/qbittorrent-scheduler.log

4. â­ï¸  Kernel Tuning (Skipped - Requires sudo password)
   â€¢ File ready: /home/tom/nas/scripts/99-qbittorrent-sysctl.conf
   â€¢ Run manually: sudo cp /home/tom/nas/scripts/99-qbittorrent-sysctl.conf /etc/sysctl.d/
   â€¢ Then: sudo sysctl -p /etc/sysctl.d/99-qbittorrent-sysctl.conf
   â€¢ Benefit: 10-20% extra throughput (optional)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ˆ CURRENT STATUS:

Container: Running âœ…
  â€¢ CPU: 4.75%
  â€¢ Memory: 199 MB / 2 GB
  â€¢ Network: Active
  â€¢ WebUI: http://localhost:8080 (accessible)

Scheduler: Active âœ…
  â€¢ Current mode: IDLE (throttled to 50 KB/s)
  â€¢ Will switch to AGGRESSIVE at 01:00 tonight
  â€¢ Cron: Running every minute

Configuration: Optimized âœ…
  â€¢ Max connections: 2000
  â€¢ Connections/torrent: 300
  â€¢ Disk cache: 256 MB
  â€¢ Active downloads: 8
  â€¢ Seeding limit: 1.0 ratio or 24h

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ PERFORMANCE EXPECTATIONS:

BEFORE:
  â€¢ Download speed: 3 MB/s (throttled all day)
  â€¢ Active torrents: 20 competing
  â€¢ Disk I/O: High latency

AFTER (01:00-08:00):
  â€¢ Download speed: 50-120 MB/s (ISP max, limited by HDD)
  â€¢ Active torrents: 8 focused
  â€¢ Disk I/O: 50-70% reduction in seeks

PER NIGHT (7 hours active):
  â€¢ Expected: 50-200 GB downloaded
  â€¢ Previously: 15-30 GB

PER MOVIE (10 GB):
  â€¢ Expected: 5-10 minutes
  â€¢ Previously: 30-60 minutes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ NEXT STEPS:

1. Monitor Tonight's Performance:
   tail -f /tmp/qbittorrent-scheduler.log

   You'll see:
   â€¢ 22:38 â†’ "ğŸ’¤ IDLE WINDOW - Throttling to minimum"
   â€¢ 01:00 â†’ "ğŸš€ ACTIVE WINDOW - Setting aggressive mode"
   â€¢ 08:00 â†’ "ğŸ’¤ IDLE WINDOW - Throttling to minimum"

2. Check WebUI:
   http://192.168.2.13:8080
   Username: admin
   Password: sotm19858514

   Verify in Settings > Connection:
   â€¢ Global max connections: 2000
   â€¢ Max connections per torrent: 300
   â€¢ Max active downloads: 8

3. Add Test Torrent:
   â€¢ Add a well-seeded movie torrent
   â€¢ It will download slowly now (idle mode)
   â€¢ Wait until 01:00 - speed should jump to maximum

4. Monitor Container Stats:
   docker stats qbittorrent --no-stream

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ TROUBLESHOOTING:

If downloads are slow even at 01:00:
  â†’ Check swarm health: Need 10+ seeders
  â†’ Check disk I/O: Run "iostat -x 1"
  â†’ Check logs: docker logs qbittorrent

If scheduler not switching:
  â†’ Check cron: crontab -l | grep qbittorrent
  â†’ Check logs: tail -f /tmp/qbittorrent-scheduler.log
  â†’ Test manually: python3 /home/tom/nas/scripts/qbittorrent-scheduler.py

If "Too many open files":
  â†’ Verify ulimits: docker inspect qbittorrent | grep Ulimits
  â†’ Should show 65536

If container crashes:
  â†’ Check memory: docker stats qbittorrent
  â†’ If using >1.8GB, reduce DiskCacheSize to 128 in config

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOCUMENTATION:

All details in: /home/tom/nas/scripts/
  â€¢ README_QBITTORRENT.md - Overview
  â€¢ QBITTORRENT_OPTIMIZATION.md - Technical details
  â€¢ INSTALL_GUIDE.sh - Step-by-step walkthrough

Configuration file:
  /mnt/docker-usb/qbittorrent/qBittorrent/qBittorrent.conf

Backup (to revert):
  /mnt/docker-usb/qbittorrent/qBittorrent/qBittorrent.conf.backup-20260121-223726

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ TO REVERT EVERYTHING:

docker stop qbittorrent
cp /mnt/docker-usb/qbittorrent/qBittorrent/qBittorrent.conf.backup-20260121-223726 \
   /mnt/docker-usb/qbittorrent/qBittorrent/qBittorrent.conf
crontab -l | grep -v qbittorrent-scheduler | crontab -
docker start qbittorrent

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš¡ OPTIONAL: Apply Kernel Tuning (10-20% extra speed)

sudo cp /home/tom/nas/scripts/99-qbittorrent-sysctl.conf /etc/sysctl.d/
sudo sysctl -p /etc/sysctl.d/99-qbittorrent-sysctl.conf

This increases TCP buffers and enables BBR congestion control.
Only needed if you're network-bound (not disk-bound).

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Your qBittorrent is now professionally tuned for maximum overnight
   movie download performance!

ğŸŒ™ Wait until 01:00 tonight and watch the downloads fly! ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
